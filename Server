from flask import Flask, request
import ssl

app = Flask(__name__)

@app.route('/api/data', methods=['POST'])
def get_data():
    # Получение данных из POST-запроса
    data = request.get_json().get('data')
    sort_key = request.get_json().get('sort_key')  # Получаем ключ для сортировки
    sort_order = request.get_json().get('sort_order', 'asc')  # Получаем порядок сортировки

    print(f"Получены данные от клиента: {data}")  # Вывод данных в терминал сервера

    # Пример обработки данных: предположим, что это список словарей
    processed_data = [
        {'name': 'item1', 'value': 10},
        {'name': 'item2', 'value': 5},
        {'name': 'item3', 'value': 15}
    ]

    # Сортировка данных, если указан ключ
    if sort_key:
        reverse = sort_order == 'desc'
        processed_data = sorted(processed_data, key=lambda x: x.get(sort_key), reverse=reverse)

    return {'result': 'ok', 'sorted_data': processed_data}  # Возвращаем отсортированные данные

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8000)  # Изменен порт на 8000
